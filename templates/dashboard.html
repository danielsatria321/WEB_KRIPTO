<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediCare - Dashboard Rumah Sakit</title>
    <link rel="stylesheet" href="../styles/styledashboard.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="profile">
                    <div class="profile-avatar">
                        <i class="fas fa-user-md"></i>
                    </div>
                    <div class="profile-info">
                        <h3 id="doctorName">Dr. Loading...</h3>
                        <p>Dokter Umum</p>
                    </div>
                </div>
            </div>

            <nav class="sidebar-menu">
                <ul>
                    <li class="menu-item active">
                        <a href="#" id="dashboardMenu">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" id="patientsMenu">
                            <i class="fas fa-user-injured"></i>
                            <span>Data Pasien</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" id="inputPemeriksaanBtn">
                            <i class="fas fa-file-medical"></i>
                            <span>Input Pemeriksaan</span>
                        </a>
                    </li>
                   
                </ul>
            </nav>

            <div class="sidebar-footer">
                <button class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Keluar</span>
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <header class="content-header">
                <div class="header-left">
                    <h1 id="pageTitle">Dashboard MediCare</h1>
                    <p id="pageSubtitle">Manajemen Data Pasien Terintegrasi</p>
                </div>
                <div class="header-right">
                    <div class="hidden">
                        <i class="fas fa-search"></i>
                        <input type="text" id="globalSearch" placeholder="Cari pasien...">
                    </div>
                    <div class="notification">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>
                    </div>
                    <div class="date-display">
                        <span id="currentDate"></span>
                    </div>
                </div>
            </header>

            <!-- Dashboard Content -->
            <div id="dashboardContent">
                <!-- Stats Grid -->
                <div class="stats-grid" id="statsGrid">
                    <!-- Data akan diisi secara dinamis oleh JavaScript -->
                    <div class="stat-card loading">
                        <div class="stat-icon">
                            <i class="fas fa-spinner fa-spin"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Memuat data...</h3>
                            <span class="stat-number">-</span>
                            <span class="stat-change">-</span>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="quick-actions">
                  
                    </button>
                </div>

                <!-- Recent Patients -->
                <div class="hidden">
                    <div class="hidden">
                      
                        <button class="view-all-btn" id="viewAllPatients">Lihat Semua</button>
                    </div>
                    <div class="patients-list" id="recentPatientsList">
                        <!-- Data akan diisi secara dinamis oleh JavaScript -->
                        <div class="patient-item loading">
                            <div class="patient-avatar">
                                <i class="fas fa-spinner fa-spin"></i>
                            </div>
                            <div class="patient-info">
                                <h4>Memuat data pasien...</h4>
                                <p>-</p>
                                <span class="patient-date">-</span>
                            </div>
                            <span class="status-badge pending">-</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Patients List Content (Hidden by Default) -->
            <div id="patientsContent" class="hidden">
                <div class="patients-header">
                    <div class="header-actions">
                        <button class="btn-primary" id="addNewPatient">
                            <i class="fas fa-plus"></i>
                            Tambah Pasien Baru
                        </button>
                        <div class="filters">
                            <select id="statusFilter" class="hidden">
                                <option value="">Semua Status</option>
                                <option value="menunggu">Menunggu</option>
                                <option value="dalam perawatan">Dalam Perawatan</option>
                                <option value="selesai">Selesai</option>
                            </select>
                            <select id="serviceFilter" class="hidden">
                                <option value="">Semua Layanan</option>
                                <option value="rawat-inap">Rawat Inap</option>
                                <option value="rawat-jalan">Rawat Jalan</option>
                                <option value="pemeriksaan">Pemeriksaan</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="patients-table-container">
                    <table class="patients-table">
                        <thead>
                            <tr>
                                <th>Nama Pasien</th>
                                <th>Tanggal Lahir</th>
                                <th>Jenis Layanan</th>
                                <th>Status</th>
                                <th>Tanggal Daftar</th>
                                <th>Pembayaran</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="patientsTableBody">
                            <!-- Data akan diisi secara dinamis oleh JavaScript -->
                            <tr>
                                <td colspan="7" class="loading-table">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    Memuat data pasien...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div class="pagination" id="pagination">
                    <!-- Pagination akan diisi secara dinamis oleh JavaScript -->
                </div>
            </div>
        </div>

        <!-- Form Modal -->
        <div class="modal-overlay" id="formModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2><i class="fas fa-file-medical"></i> Input Hasil Pemeriksaan</h2>
                    <button class="close-btn" id="closeModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <form class="patient-form" id="patientForm" enctype="multipart/form-data">
                    <input type="hidden" id="patientId" name="patientId">
                    
                    <!-- Personal Information -->
                    <div class="form-section">
                        <h3><i class="fas fa-user"></i> Informasi Pribadi</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="namaPasien">Nama Lengkap Pasien <span class="required">*</span></label>
                                <input type="text" id="namaPasien" name="namaPasien" required>
                            </div>
                            <div class="form-group">
                                <label for="tanggalLahir">Tanggal Lahir <span class="required">*</span></label>
                                <input type="date" id="tanggalLahir" name="tanggalLahir" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="alamat">Alamat Lengkap <span class="required">*</span></label>
                            <textarea id="alamat" name="alamat" rows="3" placeholder="Masukkan alamat lengkap pasien..." required></textarea>
                        </div>
                    </div>

                    <!-- Medical Information -->
                    <div class="form-section">
                        <h3><i class="fas fa-stethoscope"></i> Informasi Medis</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label style="display: block; margin-bottom: 15px; font-size: 1rem; font-weight: 600; color: var(--dark);">
                                    Jenis Layanan <span class="required">*</span>
                                </label>
                                
                                <div class="card-group-vertical" id="jenisLayananGroup">
                                    <label class="selectable-card" data-value="rawat-inap">
                                        <input type="radio" name="jenisLayanan" value="rawat-inap" class="card-input" required>
                                        <div class="card-icon rawat-inap">
                                            <i class="fas fa-procedures"></i>
                                        </div>
                                        <div class="card-content">
                                            <div class="card-title">Rawat Inap</div>
                                        </div>
                                    </label>
                                    
                                    <label class="selectable-card" data-value="rawat-jalan">
                                        <input type="radio" name="jenisLayanan" value="rawat-jalan" class="card-input" required>
                                        <div class="card-icon rawat-jalan">
                                            <i class="fas fa-walking"></i>
                                        </div>
                                        <div class="card-content">
                                            <div class="card-title">Rawat Jalan</div>
                                        </div>
                                    </label>
                                    
                                    <label class="selectable-card" data-value="pemeriksaan">
                                        <input type="radio" name="jenisLayanan" value="pemeriksaan" class="card-input" required>
                                        <div class="card-icon pemeriksaan">
                                            <i class="fas fa-stethoscope"></i>
                                        </div>
                                        <div class="card-content">
                                            <div class="card-title">Pemeriksaan</div>
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="statusPasien">Status Pasien <span class="required">*</span></label>
                                <select id="statusPasien" name="statusPasien" required>
                                    <option value="">Pilih Status</option>
                                    <option value="menunggu">Menunggu</option>
                                    <option value="dalam perawatan">Dalam Perawatan</option>
                                    <option value="selesai">Selesai</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="hasilPemeriksaan">Hasil Pemeriksaan & Diagnosis <span class="required">*</span></label>
                            <textarea id="hasilPemeriksaan" name="hasilPemeriksaan" rows="5" placeholder="Tuliskan hasil pemeriksaan, diagnosis, dan rencana perawatan..." required></textarea>
                        </div>
                    </div>

                    <!-- File Uploads -->
                    <div class="form-section">
                        <h3><i class="fas fa-paperclip"></i> Dokumen & Media</h3>
                        
                        <div class="form-note info-note" id="fileUploadNote" style="display: none;">
                            <i class="fas fa-info-circle"></i>
                            <span><strong>Catatan Edit Mode:</strong> File uploads (Foto & PDF) hanya tersimpan saat membuat data pasien baru. Untuk mengubah file, silakan hubungi administrator sistem.</span>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group file-upload-group">
                                <label for="fotoPasien">Foto Pasien</label>
                                <div class="file-upload">
                                    <input type="file" id="fotoPasien" name="fotoPasien" accept="image/*" class="file-input">
                                    <label for="fotoPasien" class="file-label">
                                        <i class="fas fa-camera"></i>
                                        <span>Unggah Foto</span>
                                    </label>
                                    <span class="file-name" id="fotoFileName">Belum ada file</span>
                                </div>
                            </div>

                            <div class="form-group file-upload-group">
                                <label for="pdfDokumen">Dokumen PDF</label>
                                <div class="file-upload">
                                    <input type="file" id="pdfDokumen" name="pdfDokumen" accept=".pdf" class="file-input">
                                    <label for="pdfDokumen" class="file-label">
                                        <i class="fas fa-file-pdf"></i>
                                        <span>Unggah PDF</span>
                                    </label>
                                    <span class="file-name" id="pdfFileName">Belum ada file</span>
                                </div>
                            </div>
                        </div>

                        <!-- Kolom Pesan Medis -->
                        <div class="form-row">
                            <div class="form-group">
                                <label for="medmsg">
                                    <i class="fas fa-comment-medical"></i>
                                    Pesan Medis
                                </label>
                                <textarea 
                                    id="medmsg" 
                                    name="medmsg" 
                                    rows="4" 
                                    placeholder="Tulis pesan medis tambahan, catatan khusus, atau instruksi perawatan untuk pasien..."
                                ></textarea>
                                <small class="form-text">
                                    Pesan ini akan disimpan sebagai catatan medis tambahan untuk pasien
                                </small>
                            </div>
                        </div>
                    </div>

                    <!-- Payment Information -->
                    <div class="form-section">
                        <h3><i class="fas fa-money-bill-wave"></i> Informasi Pembayaran</h3>
                        <div class="form-group">
                            <label for="jumlahPembayaran">Jumlah Pembayaran (Rp) <span class="required">*</span></label>
                            <div class="input-with-icon">
                                <i class="fas fa-rupiah-sign"></i>
                                <input type="number" id="jumlahPembayaran" name="jumlahPembayaran" min="0" placeholder="0" required>
                            </div>
                        </div>
                    </div>

                    <!-- Form Actions -->
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="cancelForm">
                            <i class="fas fa-times"></i>
                            Batal
                        </button>
                        <button type="submit" class="btn-primary" id="submitFormBtn">
                            <i class="fas fa-save"></i>
                            Simpan Data Pemeriksaan
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Detail Patient Modal -->
        <div class="modal-overlay" id="detailModal">
            <div class="modal-content large">
                <div class="modal-header">
                    <h2><i class="fas fa-user-injured"></i> Detail Pasien</h2>
                    <button class="close-btn" id="closeDetailModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div id="patientDetailContent">
                        <!-- Detail pasien akan diisi secara dinamis oleh JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Delete Confirmation Modal -->
        <div class="modal-overlay" id="deleteModal">
            <div class="modal-content small">
                <div class="modal-header">
                    <h2><i class="fas fa-exclamation-triangle"></i> Konfirmasi Hapus</h2>
                    <button class="close-btn" id="cancelDelete">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Apakah Anda yakin ingin menghapus data pasien <strong id="deletePatientName"></strong>?</p>
                    <p>Tindakan ini tidak dapat dibatalkan.</p>
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary" id="cancelDeleteBtn">Batal</button>
                    <button class="btn-danger" id="confirmDelete">Hapus</button>
                </div>
            </div>
        </div>
    </div>

    <script src="../script/dashboard.js"></script>
</body>
</html>